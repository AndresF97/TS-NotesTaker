(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();let E,a,l,p,h,N,d;window.location.pathname==="/notes"&&(E=document.querySelector(".note-form"),a=document.querySelector(".note-title"),l=document.querySelector(".note-textarea"),p=document.querySelector(".save-note"),h=document.querySelector(".new-note"),d=document.querySelector(".clear-btn"),N=document.querySelectorAll(".list-container .list-group"));const y=t=>{t.style.display="inline"},u=t=>{t.style.display="none"};let c;const L=()=>fetch("/api/notes",{method:"GET",headers:{"Content-Type":"application/json"}}),w=t=>fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),S=t=>fetch(`/api/notes/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),f=()=>{u(p),u(d),c.id?(y(h),a.setAttribute("readonly",!0),l.setAttribute("readonly",!0),a.value=c.title,l.value=c.text):(u(h),a.removeAttribute("readonly"),l.removeAttribute("readonly"),a.value="",l.value="")},b=()=>{const t={title:a.value,text:l.value};w(t).then(()=>{g(),f()})},O=t=>{var i;t.stopPropagation();const r=t.target,o=JSON.parse((i=r.parentElement)==null?void 0:i.getAttribute("data-note")).id;c.id===o&&(c={}),S(o).then(()=>{g(),f()})},A=t=>{var o;t.preventDefault();const r=t.target;c=JSON.parse((o=r.parentElement)==null?void 0:o.getAttribute("data-note")),f()},T=()=>{c={},y(d),f()},q=()=>{y(d),!a.value.trim()&&!l.value.trim()?u(d):!a.value.trim()||!l.value.trim()?u(p):y(p)},x=async t=>{let r=await t.json();window.location.pathname==="/notes"&&N.forEach(e=>e.innerHTML="");let o=[];const i=(e,n=!0)=>{const s=document.createElement("li");s.classList.add("list-group-item");const m=document.createElement("span");if(m.classList.add("list-item-title"),m.innerText=e,m.addEventListener("click",A),s.append(m),n){const v=document.createElement("i");v.classList.add("fas","fa-trash-alt","float-right","text-danger","delete-note"),v.addEventListener("click",O),s.append(v)}return s};r.length===0&&o.push(i("No saved Notes",!1)),r.forEach(e=>{const n=i(e.title);n.dataset.note=JSON.stringify(e),o.push(n)}),window.location.pathname==="/notes"&&o.forEach(e=>N[0].append(e))},g=()=>L().then(x);window.location.pathname==="/notes"&&(p.addEventListener("click",b),h.addEventListener("click",T),d.addEventListener("click",f),E.addEventListener("input",q));g();
